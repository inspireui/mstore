(()=>{var e,t,r,o={7089:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks,l=window.wc.wcSettings;var n=r(1609),a=r(5573);const c=(0,n.createElement)(a.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(a.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C7.10457 10 8 9.10457 8 8C8 6.89543 7.10457 6 6 6C4.89543 6 4 6.89543 4 8C4 9.10457 4.89543 10 6 10ZM20 8.75H11.1111V7.25L20 7.25V8.75ZM20 15.75L11.1111 15.75V14.25L20 14.25V15.75ZM8 15C8 16.1046 7.10457 17 6 17C4.89543 17 4 16.1046 4 15C4 13.8954 4.89543 13 6 13C7.10457 13 8 13.8954 8 15Z",fill:"currentColor"}));r(9642);const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-attribute","version":"1.0.0","title":"Filter Options","description":"Enable customers to filter the product grid by selecting one or more attributes, such as color.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":2,"ancestor":["woocommerce/product-filter"],"supports":{"interactivity":true,"inserter":false,"color":{"text":true,"background":false}},"usesContext":["query","queryId"],"attributes":{"attributeId":{"type":"number","default":0},"showCounts":{"type":"boolean","default":false},"queryType":{"type":"string","default":"or"},"displayStyle":{"type":"string","default":"list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false}}}');var s=r(7723),u=r(6087);const m=window.wp.blockEditor,d=window.wc.wcBlocksData,p=window.wp.data;var b=r(923),_=r.n(b);function g(e){const t=(0,u.useRef)(e);return _()(e,t.current)||(t.current=e),t.current}const w=window.wc.wcTypes,E=e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:l={},shouldSelect:n=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const a=(0,u.useRef)({results:[],isLoading:!0}),c=g(l),i=g(o),s=(()=>{const[,e]=(0,u.useState)();return(0,u.useCallback)((t=>{e((()=>{throw t}))}),[])})(),m=(0,p.useSelect)((e=>{if(!n)return null;const o=e(d.COLLECTIONS_STORE_KEY),l=[t,r,c,i],a=o.getCollectionError(...l);if(a){if(!(0,w.isError)(a))throw new Error("TypeError: `error` object is not an instance of Error constructor");s(a)}return{results:o.getCollection(...l),isLoading:!o.hasFinishedResolution("getCollection",l)}}),[t,r,i,c,n]);return null!==m&&(a.current=m),a.current};var h=r(4717),f=r(5574);const v=(0,u.createContext)("page"),y=()=>(0,u.useContext)(v),k=(v.Provider,e=>{const t=y();e=e||t;const r=(0,p.useSelect)((t=>t(d.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,p.useDispatch)(d.QUERY_STATE_STORE_KEY);return[r,(0,u.useCallback)((t=>{o(e,t)}),[e,o])]}),C=(e,t,r)=>{const o=y();r=r||o;const l=(0,p.useSelect)((o=>o(d.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:n}=(0,p.useDispatch)(d.QUERY_STATE_STORE_KEY);return[l,(0,u.useCallback)((t=>{n(r,e,t)}),[r,e,n])]},S=window.wp.components;var x=r(7104),N=r(6378),I=r(4133);const T=({children:e})=>(0,n.createElement)(S.Placeholder,{className:"wc-block-attribute-filter",icon:(0,n.createElement)(x.A,{icon:N.A}),label:(0,s.__)("Filter by Attribute","woocommerce"),instructions:(0,s.__)("Enable customers to filter the product grid by selecting one or more attributes, such as color.","woocommerce")},e),A=()=>(0,n.createElement)(T,null,(0,n.createElement)("p",null,(0,s.__)("Attributes are needed for filtering your products. You haven't created any attributes yet.","woocommerce")),(0,n.createElement)(S.Button,{className:"wc-block-attribute-filter__add-attribute-button",variant:"secondary",href:(0,l.getAdminLink)("edit.php?post_type=product&page=product_attributes"),target:"_top"},(0,s.__)("Add new attribute","woocommerce")+" ",(0,n.createElement)(x.A,{icon:I.A})),(0,n.createElement)(S.Button,{className:"wc-block-attribute-filter__read_more_button",variant:"tertiary",href:"https://woocommerce.com/document/managing-product-taxonomies/",target:"_blank"},(0,s.__)("Learn more","woocommerce")));var O=r(2478),P=r(851),B=r(9491);const F={clear:(0,s.__)("Clear all selected items","woocommerce"),noItems:(0,s.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,s.__)("No results for %s","woocommerce"),search:(0,s.__)("Search for items","woocommerce"),selected:e=>(0,s.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,s._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,s.__)("Search results updated.","woocommerce")},R=(e,t=e)=>{const r=e.reduce(((e,t)=>{const r=t.parent||0;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),o=("id",t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{}));const l=["0"],n=(e={})=>e.parent?[...n(o[e.parent]),e.name]:e.name?[e.name]:[],a=e=>e.map((e=>{const t=r[e.id];return l.push(""+e.id),{...e,breadcrumbs:n(o[e.parent]),children:t&&t.length?a(t):[]}})),c=a(r[0]||[]);return Object.entries(r).forEach((([e,t])=>{l.includes(e)||c.push(...a(t||[]))})),c},j=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(r).map(((e,t)=>r.test(e)?(0,n.createElement)("strong",{key:t},e):(0,n.createElement)(u.Fragment,{key:t},e)))};function L(e,t,r){const o=new Set(t.map((e=>e[r])));return e.filter((e=>!o.has(e[r])))}const q=window.wp.htmlEntities,M=({label:e})=>(0,n.createElement)("span",{className:"woocommerce-search-list__item-count"},e),D=e=>{const{item:t,search:r}=e,o=t.breadcrumbs&&t.breadcrumbs.length;return(0,n.createElement)("span",{className:"woocommerce-search-list__item-label"},o?(0,n.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(l=t.breadcrumbs).length?l.slice(0,1).toString():2===l.length?l.slice(0,1).toString()+" › "+l.slice(-1).toString():l.slice(0,1).toString()+" … "+l.slice(-1).toString()):null,(0,n.createElement)("span",{className:"woocommerce-search-list__item-name"},j((0,q.decodeEntities)(t.name),r)));var l},G=({countLabel:e,className:t,depth:r=0,controlId:o="",item:l,isSelected:a,isSingle:c,onSelect:i,search:s="",selected:m,useExpandedPanelId:d,...p})=>{var b,_;const[g,w]=d,E=null!=e&&void 0!==l.count&&null!==l.count,h=!(null===(b=l.breadcrumbs)||void 0===b||!b.length),f=!(null===(_=l.children)||void 0===_||!_.length),v=g===l.id,y=(0,P.A)(["woocommerce-search-list__item",`depth-${r}`,t],{"has-breadcrumbs":h,"has-children":f,"has-count":E,"is-expanded":v,"is-radio-button":c}),k=p.name||`search-list-item-${o}`,C=`${k}-${l.id}`,x=(0,u.useCallback)((()=>{w(v?-1:Number(l.id))}),[v,l.id,w]);return f?(0,n.createElement)("div",{className:y,onClick:x,onKeyDown:e=>"Enter"===e.key||" "===e.key?x():null,role:"treeitem",tabIndex:0},c?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("input",{type:"radio",id:C,name:k,value:l.value,onChange:i(l),onClick:e=>e.stopPropagation(),checked:a,className:"woocommerce-search-list__item-input",...p}),(0,n.createElement)(D,{item:l,search:s}),E?(0,n.createElement)(M,{label:e||l.count}):null):(0,n.createElement)(n.Fragment,null,(0,n.createElement)(S.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:a,...!a&&l.children.some((e=>m.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:j((0,q.decodeEntities)(l.name),s),onChange:()=>{a?i(L(m,l.children,"id"))():i(function(e,t,r){const o=L(t,e,"id");return[...e,...o]}(m,l.children))()},onClick:e=>e.stopPropagation()}),E?(0,n.createElement)(M,{label:e||l.count}):null)):(0,n.createElement)("label",{htmlFor:C,className:y},c?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("input",{...p,type:"radio",id:C,name:k,value:l.value,onChange:i(l),checked:a,className:"woocommerce-search-list__item-input"}),(0,n.createElement)(D,{item:l,search:s})):(0,n.createElement)(S.CheckboxControl,{...p,id:C,name:k,className:"woocommerce-search-list__item-input",value:(0,q.decodeEntities)(l.value),label:j((0,q.decodeEntities)(l.name),s),onChange:i(l),checked:a}),E?(0,n.createElement)(M,{label:e||l.count}):null)};var V=r(2370);r(6636);const Y=({id:e,label:t,popoverContents:r,remove:o,screenReaderLabel:l,className:a=""})=>{const[c,i]=(0,u.useState)(!1),m=(0,B.useInstanceId)(Y);if(l=l||t,!t)return null;t=(0,q.decodeEntities)(t);const d=(0,P.A)("woocommerce-tag",a,{"has-remove":!!o}),p=`woocommerce-tag__label-${m}`,b=(0,n.createElement)(n.Fragment,null,(0,n.createElement)("span",{className:"screen-reader-text"},l),(0,n.createElement)("span",{"aria-hidden":"true"},t));return(0,n.createElement)("span",{className:d},r?(0,n.createElement)(S.Button,{className:"woocommerce-tag__text",id:p,onClick:()=>i(!0)},b):(0,n.createElement)("span",{className:"woocommerce-tag__text",id:p},b),r&&c&&(0,n.createElement)(S.Popover,{onClose:()=>i(!1)},r),o&&(0,n.createElement)(S.Button,{className:"woocommerce-tag__remove",onClick:o(e),label:(0,s.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,s.__)("Remove %s","woocommerce"),t),"aria-describedby":p},(0,n.createElement)(x.A,{icon:V.A,size:20,className:"clear-icon",role:"img"})))},$=Y;r(8137);const W=e=>(0,n.createElement)(G,{...e}),H=e=>{const{list:t,selected:r,renderItem:o,depth:l=0,onSelect:a,instanceId:c,isSingle:i,search:s,useExpandedPanelId:m}=e,[d]=m;return t?(0,n.createElement)(u.Fragment,null,t.map((t=>{var p,b;const _=null!==(p=t.children)&&void 0!==p&&p.length&&!i?t.children.every((({id:e})=>r.find((t=>t.id===e)))):!!r.find((({id:e})=>e===t.id)),g=(null===(b=t.children)||void 0===b?void 0:b.length)&&d===t.id;return(0,n.createElement)(u.Fragment,{key:t.id},(0,n.createElement)("li",null,o({item:t,isSelected:_,onSelect:a,isSingle:i,selected:r,search:s,depth:l,useExpandedPanelId:m,controlId:c})),g?(0,n.createElement)(H,{...e,list:t.children,depth:l+1}):null)}))):null},Q=({isLoading:e,isSingle:t,selected:r,messages:o,onChange:l,onRemove:a})=>{if(e||t||!r)return null;const c=r.length;return(0,n.createElement)("div",{className:"woocommerce-search-list__selected"},(0,n.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,n.createElement)("strong",null,o.selected(c)),c>0?(0,n.createElement)(S.Button,{variant:"link",isDestructive:!0,onClick:()=>l([]),"aria-label":o.clear},(0,s.__)("Clear all","woocommerce")):null),c>0?(0,n.createElement)("ul",null,r.map(((e,t)=>(0,n.createElement)("li",{key:t},(0,n.createElement)($,{label:e.name,id:e.id,remove:a}))))):null)},K=({filteredList:e,search:t,onSelect:r,instanceId:o,useExpandedPanelId:l,...a})=>{const{messages:c,renderItem:i,selected:u,isSingle:m}=a,d=i||W;return 0===e.length?(0,n.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,n.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,n.createElement)(x.A,{icon:O.A,role:"img"})),(0,n.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,s.sprintf)(c.noResults,t):c.noItems)):(0,n.createElement)("ul",{className:"woocommerce-search-list__list"},(0,n.createElement)(H,{useExpandedPanelId:l,list:e,selected:u,renderItem:d,onSelect:r,instanceId:o,isSingle:m,search:t}))},U=e=>{const{className:t="",isCompact:r,isHierarchical:o,isLoading:l,isSingle:a,list:c,messages:i=F,onChange:m,onSearch:d,selected:p,type:b="text",debouncedSpeak:_}=e,[g,w]=(0,u.useState)(""),E=(0,u.useState)(-1),h=(0,B.useInstanceId)(U),f=(0,u.useMemo)((()=>({...F,...i})),[i]),v=(0,u.useMemo)((()=>((e,t,r)=>{if(!t)return r?R(e):e;const o=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),l=e.map((e=>!!o.test(e.name)&&e)).filter(Boolean);return r?R(l,e):l})(c,g,o)),[c,g,o]);(0,u.useEffect)((()=>{_&&_(f.updated)}),[_,f]),(0,u.useEffect)((()=>{"function"==typeof d&&d(g)}),[g,d]);const y=(0,u.useCallback)((e=>()=>{a&&m([]);const t=p.findIndex((({id:t})=>t===e));m([...p.slice(0,t),...p.slice(t+1)])}),[a,p,m]),k=(0,u.useCallback)((e=>()=>{Array.isArray(e)?m(e):-1===p.findIndex((({id:t})=>t===e.id))?m(a?[e]:[...p,e]):y(e.id)()}),[a,y,m,p]),C=(0,u.useCallback)((e=>{const[t]=p.filter((t=>!e.find((e=>t.id===e.id))));y(t.id)()}),[y,p]);return(0,n.createElement)("div",{className:(0,P.A)("woocommerce-search-list",t,{"is-compact":r,"is-loading":l,"is-token":"token"===b})},"text"===b&&(0,n.createElement)(Q,{...e,onRemove:y,messages:f}),(0,n.createElement)("div",{className:"woocommerce-search-list__search"},"text"===b?(0,n.createElement)(S.TextControl,{label:f.search,type:"search",value:g,onChange:e=>w(e)}):(0,n.createElement)(S.FormTokenField,{disabled:l,label:f.search,onChange:C,onInputChange:e=>w(e),suggestions:[],__experimentalValidateInput:()=>!1,value:l?[(0,s.__)("Loading…","woocommerce")]:p.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),l?(0,n.createElement)("div",{className:"woocommerce-search-list__list"},(0,n.createElement)(S.Spinner,null)):(0,n.createElement)(K,{...e,search:g,filteredList:v,messages:f,onSelect:k,instanceId:h,useExpandedPanelId:E}))},Z=((0,S.withSpokenMessages)(U),(0,l.getSetting)("attributes",[])),z=({isCompact:e,setAttributeId:t,attributeId:r})=>{const o={clear:(0,s.__)("Clear selected attribute","woocommerce"),list:(0,s.__)("Product Attributes","woocommerce"),noItems:(0,s.__)("Your store doesn't have any product attributes.","woocommerce"),search:(0,s.__)("Search for a product attribute:","woocommerce"),selected:e=>(0,s.sprintf)(/* translators: %d is the number of attributes selected. */ /* translators: %d is the number of attributes selected. */
(0,s._n)("%d attribute selected","%d attributes selected",e,"woocommerce"),e),updated:(0,s.__)("Product attribute search results updated.","woocommerce")},l=(0,f.di)(Z.map((e=>({id:parseInt(e.attribute_id,10),name:e.attribute_label})))).asc("name");return(0,n.createElement)(U,{className:"woocommerce-product-attributes",list:l,selected:l.filter((({id:e})=>e===r)),onChange:e=>{if(!e||!e.length)return;const o=e[0].id;Z.find((e=>e.attribute_id===o.toString()))&&r!==o&&t(o)},messages:o,isSingle:!0,isCompact:e})},J=(0,l.getSetting)("attributes",[]).reduce(((e,t)=>{const r=(o=t)&&o.attribute_name?{id:parseInt(o.attribute_id,10),name:o.attribute_name,taxonomy:"pa_"+o.attribute_name,label:o.attribute_label}:null;var o;return r&&r.id&&e.push(r),e}),[]),X=({attributes:e,setAttributes:t})=>{const{attributeId:r,showCounts:o,queryType:l,displayStyle:a,selectType:c}=e;return(0,n.createElement)(m.InspectorControls,{key:"inspector"},(0,n.createElement)(S.PanelBody,{title:(0,s.__)("Display Settings","woocommerce")},(0,n.createElement)(S.ToggleControl,{label:(0,s.__)("Display product count","woocommerce"),checked:o,onChange:()=>t({showCounts:!o})}),(0,n.createElement)(S.__experimentalToggleGroupControl,{label:(0,s.__)("Allow selecting multiple options?","woocommerce"),value:c||"multiple",onChange:e=>t({selectType:e}),className:"wc-block-attribute-filter__multiple-toggle"},(0,n.createElement)(S.__experimentalToggleGroupControlOption,{value:"multiple",label:(0,s._x)("Multiple","Number of filters","woocommerce")}),(0,n.createElement)(S.__experimentalToggleGroupControlOption,{value:"single",label:(0,s._x)("Single","Number of filters","woocommerce")})),"multiple"===c&&(0,n.createElement)(S.__experimentalToggleGroupControl,{label:(0,s.__)("Filter Conditions","woocommerce"),help:"and"===l?(0,s.__)("Choose to return filter results for all of the attributes selected.","woocommerce"):(0,s.__)("Choose to return filter results for any of the attributes selected.","woocommerce"),value:l,onChange:e=>t({queryType:e}),className:"wc-block-attribute-filter__conditions-toggle"},(0,n.createElement)(S.__experimentalToggleGroupControlOption,{value:"and",label:(0,s.__)("All","woocommerce")}),(0,n.createElement)(S.__experimentalToggleGroupControlOption,{value:"or",label:(0,s.__)("Any","woocommerce")})),(0,n.createElement)(S.__experimentalToggleGroupControl,{label:(0,s.__)("Display Style","woocommerce"),value:a,onChange:e=>t({displayStyle:e}),className:"wc-block-attribute-filter__display-toggle"},(0,n.createElement)(S.__experimentalToggleGroupControlOption,{value:"list",label:(0,s.__)("List","woocommerce")}),(0,n.createElement)(S.__experimentalToggleGroupControlOption,{value:"dropdown",label:(0,s.__)("Dropdown","woocommerce")}))),(0,n.createElement)(S.PanelBody,{title:(0,s.__)("Content Settings","woocommerce"),initialOpen:!1},(0,n.createElement)(z,{isCompact:!0,attributeId:r,setAttributeId:e=>{t({attributeId:e})}})))},ee=window.wc.blocksComponents;r(5400);const te=({name:e,count:t})=>(0,n.createElement)(n.Fragment,null,e,null!==t&&Number.isFinite(t)&&(0,n.createElement)(ee.Label,{label:t.toString(),screenReaderLabel:(0,s.sprintf)(/* translators: %s number of products. */ /* translators: %s number of products. */
(0,s._n)("%s product","%s products",t,"woocommerce"),t),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}})),re=({attributeTerms:e,showCounts:t})=>(0,n.createElement)(ee.CheckboxList,{className:"wc-block-attribute-filter style-list",onChange:()=>null,options:e.map((e=>({label:(0,n.createElement)(te,{name:e.name,count:t?e.count:null}),value:e.slug})))});var oe=r(224);const le=({placeholder:e})=>(0,n.createElement)("div",{className:"wc-interactivity-dropdown"},(0,n.createElement)("div",{className:"wc-interactivity-dropdown__dropdown"},(0,n.createElement)("div",{className:"wc-interactivity-dropdown__dropdown-selection",tabIndex:0},(0,n.createElement)("span",{className:"wc-interactivity-dropdown__placeholder"},e),(0,n.createElement)("span",{className:"wc-interactivity-dropdown__svg-container"},(0,n.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30"},(0,n.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})))))),ne=({label:e})=>(0,n.createElement)("div",{className:"wc-block-attribute-filter style-dropdown"},(0,n.createElement)(le,{placeholder:(0,s.sprintf)(/* translators: %s attribute name. */ /* translators: %s attribute name. */
(0,s.__)("Select %s","woocommerce"),e)}),(0,n.createElement)(x.A,{icon:oe.A,size:30})),ae=[{id:23,name:"Blue",slug:"blue",attr_slug:"blue",description:"",parent:0,count:4},{id:29,name:"Gray",slug:"gray",attr_slug:"gray",description:"",parent:0,count:3},{id:24,name:"Green",slug:"green",attr_slug:"green",description:"",parent:0,count:3},{id:25,name:"Red",slug:"red",attr_slug:"red",description:"",parent:0,count:4},{id:30,name:"Yellow",slug:"yellow",attr_slug:"yellow",description:"",parent:0,count:1}],ce=(0,l.getSetting)("attributes",[]),ie=({onClick:e,isEditing:t})=>(0,n.createElement)(m.BlockControls,null,(0,n.createElement)(S.ToolbarGroup,{controls:[{icon:"edit",title:(0,s.__)("Edit","woocommerce"),onClick:e,isActive:t}]})),se=({children:e,onClickToolbarEdit:t,isEditing:r,blockProps:o})=>(0,n.createElement)("div",{...o},(0,n.createElement)(ie,{onClick:t,isEditing:r}),e),ue=({attributeId:e,setAttributeId:t,onClickDone:r})=>(0,n.createElement)(T,null,(0,n.createElement)("div",{className:"wc-block-attribute-filter__selection"},(0,n.createElement)(z,{isCompact:!1,attributeId:e,setAttributeId:t}),(0,n.createElement)(S.Button,{variant:"primary",onClick:r},(0,s.__)("Done","woocommerce")))),me=(0,S.withSpokenMessages)((e=>{const{attributes:t,setAttributes:r,debouncedSpeak:o,clientId:l}=e,{attributeId:a,queryType:c,isPreview:i,displayStyle:d,showCounts:b}=t,_=function(e){if(e)return J.find((t=>t.id===e))}(a),[v,x]=(0,u.useState)(!a&&!i),[N,I]=(0,u.useState)([]),{updateBlockAttributes:T}=(0,p.dispatch)("core/block-editor"),{results:O}=E({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[(null==_?void 0:_.id)||0],shouldSelect:t.attributeId>0,query:{orderby:"menu_order"}}),{results:P}=(({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:l,isEditor:n=!1})=>{let a=y();a=`${a}-collection-data`;const[c]=k(a),[i,s]=C("calculate_attribute_counts",[],a),[m,d]=C("calculate_price_range",null,a),[p,b]=C("calculate_stock_status_counts",null,a),[_,v]=C("calculate_rating_counts",null,a),S=g(e||{}),x=g(t),N=g(r),I=g(o);(0,u.useEffect)((()=>{"object"==typeof S&&Object.keys(S).length&&(i.find((e=>(0,w.objectHasProp)(S,"taxonomy")&&e.taxonomy===S.taxonomy))||s([...i,S]))}),[S,i,s]),(0,u.useEffect)((()=>{m!==x&&void 0!==x&&d(x)}),[x,d,m]),(0,u.useEffect)((()=>{p!==N&&void 0!==N&&b(N)}),[N,b,p]),(0,u.useEffect)((()=>{_!==I&&void 0!==I&&v(I)}),[I,v,_]);const[T,A]=(0,u.useState)(n),[O]=(0,h.d7)(T,200);T||A(!0);const P=(0,u.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,f.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]);return E({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...l,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...P},shouldSelect:O})})({queryAttribute:{taxonomy:(null==_?void 0:_.taxonomy)||"",queryType:c},queryState:{},isEditor:!0}),{productFilterWrapperBlockId:B,productFilterWrapperHeadingBlockId:F}=(0,p.useSelect)((e=>{if(!l)return{productFilterWrapperBlockId:void 0,productFilterWrapperHeadingBlockId:void 0};const{getBlockParentsByBlockName:t,getBlock:r}=e("core/block-editor"),o=t(l,"woocommerce/product-filter");if(0===o.length)return{productFilterWrapperBlockId:void 0,productFilterWrapperHeadingBlockId:void 0};const n=o[0],a=r(n),c=null==a?void 0:a.innerBlocks.find((e=>"core/group"===e.name)),i=null==c?void 0:c.innerBlocks.find((e=>"core/heading"===e.name));return{productFilterWrapperBlockId:n,productFilterWrapperHeadingBlockId:null==i?void 0:i.clientId}}),[l]),R=(0,m.useBlockProps)();(0,u.useEffect)((()=>{const e=(0,w.objectHasProp)(P,"attribute_counts")&&(t=P.attribute_counts,Array.isArray(t)&&t.every((e=>"term"in e&&"count"in e)))?P.attribute_counts.map((e=>e.term)):[];var t;if(0===e.length)return I([]);I(O.filter((t=>e.includes(t.id))))}),[O,P]),(0,u.useEffect)((()=>{var e,t,r;B&&T(B,{heading:null!==(e=null==_?void 0:_.label)&&void 0!==e?e:(0,s.__)("Attribute","woocommerce"),metadata:{name:(0,s.sprintf)(/* translators: %s is referring to the filter attribute name. For example: Color, Size, etc. */ /* translators: %s is referring to the filter attribute name. For example: Color, Size, etc. */
(0,s.__)("%s (Experimental)","woocommerce"),null!==(t=null==_?void 0:_.label)&&void 0!==t?t:(0,s.__)("Attribute","woocommerce"))}}),F&&T(F,{content:null!==(r=null==_?void 0:_.label)&&void 0!==r?r:(0,s.__)("Attribute","woocommerce")})}),[a,null==_?void 0:_.id,null==_?void 0:_.label,B,F,T]);const j=(0,u.useCallback)((()=>{x(!1),o((0,s.__)("Now displaying a preview of the Filter Products by Attribute block.","woocommerce"))}),[x]),L=(0,u.useCallback)((e=>{r({attributeId:e})}),[r]),q=(0,u.useCallback)((()=>{x(!v)}),[v]);return i?(0,n.createElement)(se,{onClickToolbarEdit:q,isEditing:v,blockProps:R},(0,n.createElement)(S.Disabled,null,(0,n.createElement)(re,{showCounts:b,attributeTerms:ae}))):0===Object.keys(ce).length?(0,n.createElement)(se,{onClickToolbarEdit:q,isEditing:v,blockProps:R},(0,n.createElement)(A,null)):v?(0,n.createElement)(se,{onClickToolbarEdit:q,isEditing:v,blockProps:R},(0,n.createElement)(ue,{onClickDone:j,attributeId:a,setAttributeId:L})):a&&_?0===N.length?(0,n.createElement)(se,{onClickToolbarEdit:q,isEditing:v,blockProps:R},(0,n.createElement)(S.Notice,{status:"warning",isDismissible:!1},(0,n.createElement)("p",null,(0,s.__)("There are no products with the selected attributes.","woocommerce")))):(0,n.createElement)(se,{onClickToolbarEdit:q,isEditing:v,blockProps:R},(0,n.createElement)(X,{...e}),(0,n.createElement)(S.Disabled,null,"dropdown"===d?(0,n.createElement)(ne,{label:_.label||(0,s.__)("attribute","woocommerce")}):(0,n.createElement)(re,{showCounts:b,attributeTerms:N})," ")):(0,n.createElement)(se,{onClickToolbarEdit:q,isEditing:v,blockProps:R},(0,n.createElement)(S.Notice,{status:"warning",isDismissible:!1},(0,n.createElement)("p",null,(0,s.__)("Please select an attribute to use this filter!","woocommerce"))))}));(()=>{const{experimentalBlocksEnabled:e}=(0,l.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,o.registerBlockType)(i,{edit:me,icon:c})},5400:()=>{},9642:()=>{},8137:()=>{},6636:()=>{},1609:e=>{"use strict";e.exports=window.React},9491:e=>{"use strict";e.exports=window.wp.compose},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={exports:{}};return o[e].call(r.exports,r,r.exports,n),r.exports}n.m=o,e=[],n.O=(t,r,o,l)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,l]=e[u],c=!0,i=0;i<r.length;i++)(!1&l||a>=l)&&Object.keys(n.O).every((e=>n.O[e](r[i])))?r.splice(i--,1):(c=!1,l<a&&(a=l));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,o,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var l=Object.create(null);n.r(l);var a={};t=t||[null,r({}),r([]),r(r)];for(var c=2&o&&e;"object"==typeof c&&!~t.indexOf(c);c=r(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,n.d(l,a),l},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=2448,(()=>{var e={2448:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,l,[a,c,i]=r,s=0;if(a.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(i)var u=i(n)}for(t&&t(r);s<a.length;s++)l=a[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[94],(()=>n(7089)));a=n.O(a),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-attribute"]=a})();